# Nazim - Islamic School Management System

## Project Overview

Nazim is a comprehensive, multi-tenant SaaS application for managing Islamic schools and madrasas. The system handles students, staff, academic years, classes, timetables, admissions, and comprehensive reporting.

**Key Principle**: Organizations are the primary tenant boundary. All data is scoped to organizations, and users can change schools but NOT organizations.

## Tech Stack

### Backend
- **Framework**: Laravel 12 (PHP 8.2+)
- **Database**: PostgreSQL with UUID primary keys
- **Authentication**: Laravel Sanctum (Bearer token-based)
- **Permissions**: Spatie Laravel Permission (organization-scoped)
- **API**: RESTful JSON API with snake_case naming

### Frontend
- **Framework**: React 18 with TypeScript
- **Build Tool**: Vite 5
- **State Management**: TanStack Query v5 (React Query)
- **Routing**: React Router v6
- **UI Library**: shadcn/ui (Radix UI + Tailwind CSS)
- **Forms**: React Hook Form + Zod validation
- **Styling**: Tailwind CSS
- **HTTP**: Native Fetch API

## Architecture Principles

### 1. Multi-Tenancy & Organization Scoping

**CRITICAL**: Every data record MUST be scoped to an organization.

```typescript
// ✅ CORRECT: Organization ID is automatically set
const insertData = {
  name: 'New Class',
  organization_id: profile.organization_id, // Auto-set from user profile
};

// ❌ WRONG: Never allow cross-organization access
const data = await api.get('/students'); // Missing org filter
```

**Key Rules**:
- Users can change `school_id` but NEVER `organization_id`
- `organization_id` is automatically inserted on record creation
- Super admins with `organization_id = null` can access all organizations
- Regular users only access their assigned organization
- All API endpoints filter by organization automatically

### 2. API/Domain Type Separation Pattern

**ALL new modules MUST follow this pattern**:

```
frontend/src/
├── types/
│   ├── api/           # Laravel API types (snake_case)
│   │   └── module.ts
│   └── domain/        # Frontend domain types (camelCase)
│       └── module.ts
├── mappers/           # Convert between API and Domain types
│   └── moduleMapper.ts
├── hooks/             # React Query hooks
│   └── useModule.tsx
└── components/
    └── module/
```

**Example Pattern**:

```typescript
// types/api/student.ts - Laravel API response (snake_case)
export interface Student {
  id: string;
  full_name: string;
  father_name: string;
  organization_id: string;
  school_id: string | null;
  admission_no: string;
  created_at: string;
  updated_at: string;
}

// types/domain/student.ts - Frontend domain model (camelCase)
export interface Student {
  id: string;
  fullName: string;
  fatherName: string;
  organizationId: string;
  schoolId: string | null;
  admissionNo: string;
  createdAt: Date;
  updatedAt: Date;
}

// mappers/studentMapper.ts - Bidirectional mapping
export function mapStudentApiToDomain(api: ApiStudent): DomainStudent {
  return {
    id: api.id,
    fullName: api.full_name,
    fatherName: api.father_name,
    organizationId: api.organization_id,
    schoolId: api.school_id,
    admissionNo: api.admission_no,
    createdAt: new Date(api.created_at),
    updatedAt: new Date(api.updated_at),
  };
}

export function mapStudentDomainToInsert(domain: Partial<DomainStudent>): ApiStudentInsert {
  return {
    full_name: domain.fullName,
    father_name: domain.fatherName,
    organization_id: domain.organizationId,
    school_id: domain.schoolId,
    admission_no: domain.admissionNo,
  };
}

export function mapStudentDomainToUpdate(domain: Partial<DomainStudent>): ApiStudentUpdate {
  const update: Partial<ApiStudentUpdate> = {};
  if (domain.fullName !== undefined) update.full_name = domain.fullName;
  if (domain.fatherName !== undefined) update.father_name = domain.fatherName;
  if (domain.schoolId !== undefined) update.school_id = domain.schoolId;
  // NOTE: Never include organization_id in updates
  return update;
}
```

### 3. React Query Hooks Pattern

**ALL hooks MUST include these performance optimizations**:

```typescript
export const useStudents = (organizationId?: string) => {
  const { user, profile, loading } = useAuth();
  const { orgIds, isLoading: orgsLoading } = useAccessibleOrganizations();

  return useQuery<Student[]>({
    queryKey: ['students', organizationId, orgIds.join(',')],
    queryFn: async () => {
      // REQUIRED: Check auth state
      if (!user || !profile || loading) return [];
      if (orgsLoading) return [];

      // REQUIRED: Validate organization access
      const resolvedOrgIds = orgIds;
      if (resolvedOrgIds.length === 0) return [];

      // API call with organization filter
      const params: any = {};
      if (organizationId) {
        if (!resolvedOrgIds.includes(organizationId)) return [];
        params.organization_id = organizationId;
      }

      const apiStudents = await studentsApi.list(params);
      return apiStudents.map(mapStudentApiToDomain);
    },
    enabled: !!user && !!profile && !loading && !orgsLoading,
    staleTime: 5 * 60 * 1000, // REQUIRED: 5 minutes
    refetchOnWindowFocus: false, // REQUIRED: Performance
    refetchOnReconnect: false, // REQUIRED: Performance
  });
};
```

**Mutation Pattern**:

```typescript
export const useCreateStudent = () => {
  const queryClient = useQueryClient();
  const { profile } = useAuth();

  return useMutation({
    mutationFn: async (studentData: Partial<Student>) => {
      // REQUIRED: Auto-set organization_id
      const organizationId = studentData.organizationId || profile?.organization_id;
      if (!organizationId) {
        throw new Error('User must be assigned to an organization');
      }

      const insertData = mapStudentDomainToInsert({
        ...studentData,
        organizationId,
      });

      const apiStudent = await studentsApi.create(insertData);
      return mapStudentApiToDomain(apiStudent);
    },
    onSuccess: () => {
      // REQUIRED: Invalidate related queries
      queryClient.invalidateQueries({ queryKey: ['students'] });
      queryClient.invalidateQueries({ queryKey: ['student-stats'] });
      toast.success('Student created successfully');
    },
    onError: (error: Error) => {
      toast.error(error.message || 'Failed to create student');
    },
  });
};
```

## Backend Development Guidelines

### Controller Pattern

**ALL controllers MUST follow this pattern**:

```php
<?php

namespace App\Http\Controllers;

use App\Models\Student;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\DB;
use Illuminate\Validation\Rule;

class StudentController extends Controller
{
    /**
     * Display a listing of students
     */
    public function index(Request $request)
    {
        try {
            // REQUIRED: Get user profile
            $user = $request->user();
            $profile = DB::table('profiles')->where('id', $user->id)->first();

            if (!$profile) {
                return response()->json(['error' => 'Profile not found'], 404);
            }

            // REQUIRED: Validate input
            $validated = $request->validate([
                'organization_id' => 'nullable|uuid|exists:organizations,id',
                'school_id' => 'nullable|uuid|exists:schools,id',
                'student_status' => 'nullable|string|in:active,inactive,graduated,expelled',
                'search' => 'nullable|string|max:255',
            ]);

            // REQUIRED: Get accessible organizations
            $orgIds = $this->getAccessibleOrganizations($profile);

            // REQUIRED: Start with base query
            $query = Student::whereNull('deleted_at');

            // REQUIRED: Filter by organization
            if (!empty($validated['organization_id'])) {
                if (in_array($validated['organization_id'], $orgIds)) {
                    $query->where('organization_id', $validated['organization_id']);
                } else {
                    return response()->json([]);
                }
            } else {
                if (!empty($orgIds)) {
                    $query->whereIn('organization_id', $orgIds);
                } else {
                    $query->whereRaw('1 = 0'); // No access
                }
            }

            // Additional filters
            if (!empty($validated['school_id'])) {
                $query->where('school_id', $validated['school_id']);
            }

            if (!empty($validated['student_status'])) {
                $query->where('student_status', $validated['student_status']);
            }

            if (!empty($validated['search'])) {
                $search = $validated['search'];
                $query->where(function ($q) use ($search) {
                    $q->where('full_name', 'ILIKE', "%{$search}%")
                      ->orWhere('father_name', 'ILIKE', "%{$search}%")
                      ->orWhere('admission_no', 'ILIKE', "%{$search}%");
                });
            }

            $students = $query->orderBy('full_name')->get();

            return response()->json($students);
        } catch (\Illuminate\Validation\ValidationException $e) {
            return response()->json([
                'error' => 'Validation failed',
                'details' => $e->errors()
            ], 400);
        } catch (\Exception $e) {
            \Log::error('StudentController@index error: ' . $e->getMessage(), [
                'trace' => $e->getTraceAsString(),
                'request' => $request->all()
            ]);

            return response()->json([
                'error' => 'An error occurred while fetching students',
                'message' => config('app.debug') ? $e->getMessage() : 'Internal server error'
            ], 500);
        }
    }

    /**
     * Store a newly created student
     */
    public function store(Request $request)
    {
        try {
            $user = $request->user();
            $profile = DB::table('profiles')->where('id', $user->id)->first();

            if (!$profile) {
                return response()->json(['error' => 'Profile not found'], 404);
            }

            // REQUIRED: Auto-set organization_id
            $organizationId = $request->organization_id;
            if ($organizationId === null) {
                if ($profile->role === 'super_admin' && $profile->organization_id === null) {
                    return response()->json(['error' => 'Super admin must specify organization_id'], 400);
                } else {
                    $organizationId = $profile->organization_id;
                }
            }

            // REQUIRED: Validate organization access
            if ($profile->role !== 'super_admin' && $organizationId !== $profile->organization_id) {
                return response()->json(['error' => 'Cannot create student for different organization'], 403);
            }

            // REQUIRED: Validate input
            $validated = $request->validate([
                'full_name' => 'required|string|max:255',
                'father_name' => 'required|string|max:255',
                'admission_no' => ['required', 'string', 'max:100', Rule::unique('students')->where(function ($query) use ($organizationId) {
                    return $query->where('organization_id', $organizationId)->whereNull('deleted_at');
                })],
                'gender' => 'required|string|in:male,female',
                'school_id' => 'nullable|uuid|exists:schools,id',
                // ... other fields
            ]);

            // REQUIRED: Create with organization_id
            $student = Student::create([
                ...$validated,
                'organization_id' => $organizationId,
            ]);

            return response()->json($student, 201);
        } catch (\Illuminate\Validation\ValidationException $e) {
            return response()->json([
                'error' => 'Validation failed',
                'details' => $e->errors()
            ], 400);
        } catch (\Exception $e) {
            \Log::error('StudentController@store error: ' . $e->getMessage(), [
                'trace' => $e->getTraceAsString(),
                'request' => $request->all()
            ]);

            return response()->json([
                'error' => 'An error occurred while creating student',
                'message' => config('app.debug') ? $e->getMessage() : 'Internal server error'
            ], 500);
        }
    }

    /**
     * Update the specified student
     */
    public function update(Request $request, string $id)
    {
        try {
            $user = $request->user();
            $profile = DB::table('profiles')->where('id', $user->id)->first();

            if (!$profile) {
                return response()->json(['error' => 'Profile not found'], 404);
            }

            $student = Student::whereNull('deleted_at')->findOrFail($id);

            // REQUIRED: Validate organization access
            if ($profile->role !== 'super_admin') {
                if ($student->organization_id !== $profile->organization_id) {
                    return response()->json(['error' => 'Cannot update student from different organization'], 403);
                }
            }

            // REQUIRED: Prevent organization_id changes
            if ($request->has('organization_id') && $profile->role !== 'super_admin') {
                return response()->json(['error' => 'Cannot change organization_id'], 403);
            }

            $validated = $request->validate([
                'full_name' => 'sometimes|string|max:255',
                'father_name' => 'sometimes|string|max:255',
                'school_id' => 'nullable|uuid|exists:schools,id', // CAN change school
                // ... other fields
                // NOTE: organization_id is NOT in validation - cannot be changed
            ]);

            $student->update($validated);

            return response()->json($student);
        } catch (\Illuminate\Validation\ValidationException $e) {
            return response()->json([
                'error' => 'Validation failed',
                'details' => $e->errors()
            ], 400);
        } catch (\Exception $e) {
            \Log::error('StudentController@update error: ' . $e->getMessage(), [
                'trace' => $e->getTraceAsString(),
                'id' => $id,
                'request' => $request->all()
            ]);

            return response()->json([
                'error' => 'An error occurred while updating student',
                'message' => config('app.debug') ? $e->getMessage() : 'Internal server error'
            ], 500);
        }
    }

    /**
     * Helper: Get accessible organization IDs for user
     */
    private function getAccessibleOrganizations($profile): array
    {
        $orgIds = [];

        if ($profile->role === 'super_admin' && $profile->organization_id === null) {
            // Super admin can access all organizations
            $orgIds = DB::table('organizations')
                ->whereNull('deleted_at')
                ->pluck('id')
                ->toArray();
        } else {
            // Regular users access only their organization
            if ($profile->organization_id) {
                $orgIds = [$profile->organization_id];
            }
        }

        return $orgIds;
    }
}
```

### Model Pattern

```php
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\SoftDeletes;
use Illuminate\Database\Eloquent\Concerns\HasUuids;

class Student extends Model
{
    use HasUuids, SoftDeletes;

    protected $table = 'students';

    // REQUIRED: Explicitly list all fillable fields
    protected $fillable = [
        'organization_id',
        'school_id',
        'admission_no',
        'full_name',
        'father_name',
        'gender',
        // ... all other fields
    ];

    // REQUIRED: Cast dates and JSON fields
    protected $casts = [
        'created_at' => 'datetime',
        'updated_at' => 'datetime',
        'deleted_at' => 'datetime',
        'birth_date' => 'date',
        'admission_date' => 'date',
        'is_orphan' => 'boolean',
    ];

    // REQUIRED: Define relationships
    public function organization()
    {
        return $this->belongsTo(Organization::class);
    }

    public function school()
    {
        return $this->belongsTo(School::class);
    }
}
```

## Database Schema Guidelines

### Migration Pattern

**ALL migrations MUST include**:

```php
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('students', function (Blueprint $table) {
            // REQUIRED: UUID primary key
            $table->uuid('id')->primary();

            // REQUIRED: Organization FK (tenant boundary)
            $table->uuid('organization_id')->nullable()->index();
            $table->foreign('organization_id')
                  ->references('id')
                  ->on('organizations')
                  ->onDelete('cascade');

            // OPTIONAL: School FK (users can change this)
            $table->uuid('school_id')->nullable()->index();
            $table->foreign('school_id')
                  ->references('id')
                  ->on('schools')
                  ->onDelete('set null');

            // Data fields
            $table->string('admission_no', 100)->index();
            $table->string('full_name');
            $table->string('father_name');
            $table->enum('gender', ['male', 'female']);
            // ... other fields

            // REQUIRED: Timestamps and soft deletes
            $table->timestamps();
            $table->softDeletes();

            // REQUIRED: Unique constraints scoped to organization
            $table->unique(['organization_id', 'admission_no']);

            // REQUIRED: Performance indexes
            $table->index(['organization_id', 'school_id']);
            $table->index(['organization_id', 'student_status']);
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('students');
    }
};
```

## Common Patterns

### 1. File Upload Pattern

```typescript
// Frontend hook
export const useUploadStudentPicture = () => {
  return useMutation({
    mutationFn: async ({ studentId, file }: { studentId: string; file: File }) => {
      const result = await studentsApi.uploadPicture(studentId, file);
      return result.url;
    },
  });
};

// API client
uploadPicture: async (id: string, file: File) => {
  const formData = new FormData();
  formData.append('file', file);
  return apiClient.post(`/students/${id}/picture`, formData, {
    headers: {}, // Let browser set Content-Type with boundary
  });
},
```

```php
// Laravel controller
public function uploadPicture(Request $request, string $id)
{
    $request->validate([
        'file' => 'required|image|mimes:jpeg,png,jpg|max:5120', // 5MB
    ]);

    $student = Student::findOrFail($id);

    // Validate organization access
    if ($profile->organization_id !== $student->organization_id) {
        return response()->json(['error' => 'Unauthorized'], 403);
    }

    $file = $request->file('file');
    $path = $file->store("organizations/{$student->organization_id}/students", 'public');

    $student->update(['picture_path' => $path]);

    return response()->json([
        'url' => Storage::url($path),
        'path' => $path,
    ]);
}
```

### 2. Stats/Analytics Pattern

```typescript
export const useStudentStats = (organizationId?: string) => {
  const { user, profile, loading } = useAuth();
  const { orgIds, isLoading: orgsLoading } = useAccessibleOrganizations();

  return useQuery<StudentStats>({
    queryKey: ['student-stats', organizationId || 'all', orgIds.join(',')],
    queryFn: async (): Promise<StudentStats> => {
      if (!user || !profile || loading || orgsLoading) {
        return { total: 0, active: 0, inactive: 0, graduated: 0, byGender: { male: 0, female: 0 } };
      }

      const params: any = {};
      if (organizationId) {
        params.organization_id = organizationId;
      }

      const apiStats = await studentsApi.stats(params);
      return {
        total: apiStats.total,
        active: apiStats.active,
        inactive: apiStats.inactive,
        graduated: apiStats.graduated,
        byGender: apiStats.by_gender,
      };
    },
    enabled: !!user && !!profile && !loading && !orgsLoading,
    staleTime: 5 * 60 * 1000,
    refetchOnWindowFocus: false,
  });
};
```

### 3. Autocomplete/Search Pattern

```typescript
export const useStudentAutocomplete = () => {
  const { user, profile } = useAuth();

  return useQuery<StudentAutocomplete[]>({
    queryKey: ['student-autocomplete', profile?.organization_id],
    queryFn: async () => {
      if (!user || !profile) return [];
      const data = await studentsApi.autocomplete();
      return data.map(mapStudentAutocompleteApiToDomain);
    },
    enabled: !!user && !!profile,
    staleTime: 10 * 60 * 1000, // 10 minutes - autocomplete changes rarely
    gcTime: 30 * 60 * 1000,
    refetchOnWindowFocus: false,
    refetchOnReconnect: false,
  });
};
```

## Performance Best Practices

### 1. React Query Configuration

```typescript
// REQUIRED: Global query client config
const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 30 * 60 * 1000, // 30 minutes
      gcTime: 60 * 60 * 1000, // 1 hour
      retry: (failureCount, error: any) => {
        if (error?.status >= 400 && error?.status < 500) return false;
        return failureCount < 3;
      },
      refetchOnWindowFocus: false,
      refetchOnMount: false,
      refetchOnReconnect: false,
    },
  },
});
```

### 2. Component Optimization

```typescript
// REQUIRED: Memoize expensive components
export const StudentProfileView = memo(function StudentProfileView({ open, onOpenChange, student }: Props) {
  // REQUIRED: Conditional fetching for dialogs
  const { data: documents } = useStudentDocuments(open ? student?.id : undefined);
  const { data: history } = useStudentEducationalHistory(open ? student?.id : undefined);

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      {/* Component content */}
    </Dialog>
  );
});
```

### 3. Avoid Excessive Logging

```typescript
// ❌ NEVER do this - causes performance issues
useEffect(() => {
  console.log('Students:', students); // Logs massive arrays on every render
}, [students]);

// ✅ Do this instead - minimal logging
useEffect(() => {
  if (import.meta.env.DEV && error) {
    console.error('Failed to load students:', error.message);
  }
}, [error]);
```

## Security Guidelines

### 1. Input Validation

```php
// REQUIRED: Validate all inputs
$validated = $request->validate([
    'email' => 'required|email|max:255|unique:users',
    'admission_no' => ['required', 'string', 'max:100', Rule::unique('students')->where(function ($query) use ($organizationId) {
        return $query->where('organization_id', $organizationId)->whereNull('deleted_at');
    })],
    'phone' => 'nullable|string|regex:/^\+?[0-9\s\-()]+$/|max:20',
]);
```

### 2. SQL Injection Prevention

```php
// ✅ CORRECT: Use query builder
$students = DB::table('students')
    ->where('organization_id', $organizationId)
    ->where('full_name', 'ILIKE', "%{$search}%")
    ->get();

// ❌ WRONG: Raw SQL without bindings
DB::select("SELECT * FROM students WHERE full_name LIKE '%{$search}%'");
```

### 3. XSS Prevention

```typescript
// Frontend automatically escapes with React
<div>{student.fullName}</div> // Safe

// For HTML content, use DOMPurify
import DOMPurify from 'dompurify';
<div dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(htmlContent) }} />
```

## Adding New Modules

### Checklist for New Module

1. **Backend**:
   - [ ] Create migration with UUID, organization_id, timestamps, soft deletes
   - [ ] Create Model with HasUuids, SoftDeletes, fillable, casts
   - [ ] Create Controller with full error handling
   - [ ] Add routes to `routes/api.php`
   - [ ] Add organization scoping to all queries
   - [ ] Add input validation to all methods
   - [ ] Add error logging with stack traces

2. **Frontend Types**:
   - [ ] Create `types/api/module.ts` (snake_case)
   - [ ] Create `types/domain/module.ts` (camelCase)
   - [ ] Create `mappers/moduleMapper.ts` with bidirectional mapping
   - [ ] Export types in mapper file

3. **Frontend API Client**:
   - [ ] Add API client methods to `lib/api/client.ts`
   - [ ] Use FormData for file uploads
   - [ ] Include organization_id in params where needed

4. **Frontend Hooks**:
   - [ ] Create `hooks/useModule.tsx`
   - [ ] Implement list, get, create, update, delete hooks
   - [ ] Add performance optimizations (staleTime, refetch settings)
   - [ ] Check auth loading state
   - [ ] Validate organization access
   - [ ] Invalidate related queries on mutations
   - [ ] Show toast notifications

5. **Frontend Components**:
   - [ ] Create listing page with filters
   - [ ] Create form dialog for create/edit
   - [ ] Create profile/detail view
   - [ ] Add loading states
   - [ ] Add error handling
   - [ ] Add permission guards
   - [ ] Memoize expensive components

## API Client Configuration

### Environment Variables

```bash
# Backend (.env)
APP_URL=http://localhost:8000
FRONTEND_URL=http://localhost:5173
DB_CONNECTION=pgsql
DB_HOST=127.0.0.1
DB_PORT=5432
DB_DATABASE=nazim
DB_USERNAME=postgres
DB_PASSWORD=your_password

# Frontend (.env)
VITE_API_URL=/api  # Uses Vite proxy in development
```

### Vite Proxy Configuration

```typescript
// vite.config.ts - REQUIRED configuration
export default defineConfig({
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:8000',
        changeOrigin: true,
        secure: false,
      },
    },
  },
});
```

## Testing Guidelines

### Backend Testing

```php
// Feature test example
public function test_student_creation_scoped_to_organization()
{
    $user = User::factory()->create();
    $profile = Profile::factory()->create([
        'id' => $user->id,
        'organization_id' => $this->organization->id,
        'role' => 'admin',
    ]);

    $response = $this->actingAs($user)
        ->postJson('/api/students', [
            'full_name' => 'Test Student',
            'father_name' => 'Test Father',
            'admission_no' => 'ADM001',
            'gender' => 'male',
            // organization_id should be auto-set
        ]);

    $response->assertStatus(201);
    $this->assertEquals($this->organization->id, $response->json('organization_id'));
}
```

## Troubleshooting

### Common Issues

1. **"Request blocked by DevTools"**
   - Disable request blocking in Chrome DevTools
   - Check Network tab for blocked requests
   - Clear browser cache

2. **CORS errors**
   - Verify `config/cors.php` includes frontend URL
   - Check `HandleCors` middleware is registered
   - Ensure `FRONTEND_URL` env variable is set

3. **401 Unauthorized**
   - Check token is stored in localStorage
   - Verify token is sent in Authorization header
   - Check backend routes have `auth:sanctum` middleware

4. **Organization access issues**
   - Verify user profile has organization_id
   - Check super admin has null organization_id
   - Ensure accessible organizations query works

## Code Style

### TypeScript

- Use explicit types, avoid `any`
- Prefer interfaces over types for objects
- Use optional chaining: `student?.schoolId`
- Use nullish coalescing: `value ?? defaultValue`

### PHP

- Follow PSR-12 coding standard
- Use type hints for parameters and return types
- Use strict comparison: `===` instead of `==`
- Use null coalescing: `$value ?? $default`

## Git Workflow

```bash
# Feature branch workflow
git checkout -b feature/add-attendance-module
# ... make changes ...
git add .
git commit -m "feat: add attendance module with organization scoping"
git push origin feature/add-attendance-module
# Create pull request
```

## Deployment

### Backend

```bash
cd backend
composer install --optimize-autoloader --no-dev
php artisan migrate --force
php artisan config:cache
php artisan route:cache
php artisan view:cache
```

### Frontend

```bash
cd frontend
npm ci
npm run build
# Deploy dist/ folder to web server
```

---

**Last Updated**: 2025-12-02
**Version**: 1.0.0
**Maintainers**: Nazim Development Team
